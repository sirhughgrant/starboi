name: Sync stars from granolacowboy

on:
  workflow_dispatch: {}           # let you run it manually
  schedule:
    - cron: "23 3 * * *"          # also runs daily at 03:23 UTC

jobs:
  sync:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - run: python -m pip install --upgrade pip requests

      - name: Run sync
        env:
          GITHUB_TOKEN: ${{ secrets.STAR_SYNC_TOKEN }}
          SOURCE_USER: "granolacowboy"
          MAX_PER_RUN: "100"      # cap per run
          DRY_RUN: "true"         # start safe; switch to "false" after verifying
        run: python .github/scripts/star_sync.py
